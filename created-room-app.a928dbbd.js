const e=async()=>{try{return await fetch("https://68860803f52d34140f6b2f20.mockapi.io/create-room-app/furniture").then(e=>e.json())}catch(e){return e}},t=e=>JSON.parse(localStorage.getItem(e)),r=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))};Object.keys(localStorage).includes("furniture")||r("furniture",[]),Object.keys(localStorage).includes("index")||r("index",1),e().then(e=>{document.querySelector("#sidebar-list").innerHTML=e.map(e=>`<li class="sidebar__item">
        <img id="img-${e.id}" data-img class="sidebar__img" src="${e.img}" alt="Furniture" />
      </li>`).join("")}),document.querySelector("#all").innerHTML=t("furniture").map(e=>`<img class="room__img" data-image style="top: ${e.top}px; left: ${e.left}px; transform: rotate(${e.rotate}deg)" id="img-${e.id}" src="${e.src}" alt="Furniture"/>`).join(""),document.querySelector("#sidebar").addEventListener("click",e=>{if(e.target.hasAttribute("data-img")||e.target.firstElementChild.hasAttribute("data-img")){var l,o;let c=e.target.hasAttribute("data-img")?e.target:e.target.firstElementChild;l=t("index"),o=c.src,document.querySelector("#all").insertAdjacentHTML("beforeend",`<img class="room__img" data-image style="transform:rotate(0deg)" id="img-${l}" src="${o}" alt="Furniture"/>`),document.querySelector("#all").querySelector(`#img-${t("index")}`).style.top="0px",document.querySelector("#all").querySelector(`#img-${t("index")}`).style.left="0px";let u=t("furniture");u.push({id:t("index"),src:c.src,top:0,left:0,rotate:0}),r("furniture",u),r("index",t("index")+1)}});let l="";document.querySelector("#all").addEventListener("contextmenu",e=>{if(e.preventDefault(),e.target.hasAttribute("data-image")){var t,r;l=e.target.id;let o=document.querySelector("#room").getBoundingClientRect();t=e.pageX-o.left,r=e.pageY-o.top,document.querySelector("#menu").classList.remove("is-hidden"),document.querySelector("#menu").style.left=`${t}px`,document.querySelector("#menu").style.top=`${r}px`}}),window.addEventListener("click",e=>{e.target.hasAttribute("data-image")||document.querySelector("#menu").classList.add("is-hidden")}),document.querySelector("#rotate").addEventListener("click",()=>{document.querySelector("#all").querySelector(`#${l}`).style.transform=`rotate(${Number.parseInt(document.querySelector("#all").querySelector(`#${l}`).style.transform.slice(7))+90}deg`;let e=t("furniture");e.find(e=>`img-${e.id}`===l).rotate+=90,r("furniture",e)}),document.querySelector("#toup").addEventListener("click",e=>{document.querySelector("#all").insertAdjacentHTML("beforeend",`<img class="room__img" data-image style="top: ${document.querySelector("#all").querySelector(`#${l}`).style.top}; left: ${document.querySelector("#all").querySelector(`#${l}`).style.left};transform: ${document.querySelector("#all").querySelector(`#${l}`).style.transform}" id="${l}" src="${document.querySelector("#all").querySelector(`#${l}`).src}" alt="Furniture"/>`),document.querySelector("#all").querySelector(`#${l}`).remove();let o=t("furniture");o.push(o.find(e=>`img-${e.id}`===l)),o.splice(o.indexOf(o.find(e=>`img-${e.id}`===l)),1),r("furniture",o)}),document.querySelector("#todown").addEventListener("click",e=>{document.querySelector("#all").insertAdjacentHTML("afterbegin",`<img class="room__img" data-image style="top: ${document.querySelector("#all").querySelector(`#${l}`).style.top}; left: ${document.querySelector("#all").querySelector(`#${l}`).style.left};transform: ${document.querySelector("#all").querySelector(`#${l}`).style.transform}" id="${l}" src="${document.querySelector("#all").querySelector(`#${l}`).src}" alt="Furniture"/>`),document.querySelector("#all").querySelectorAll(`#${l}`)[1].remove();let o=t("furniture"),c=o.find(e=>`img-${e.id}`===l);o.unshift({id:c.id,src:c.src,top:c.top,left:c.left,rotate:c.rotate}),o.splice(o.indexOf(o.filter(e=>`img-${e.id}`===l)[1]),1),r("furniture",o)}),document.querySelector("#deleted").addEventListener("click",e=>{document.querySelector("#all").querySelector(`#${l}`).remove();let o=t("furniture");o.splice(o.indexOf(o.find(e=>`img-${e.id}`===l)),1),r("furniture",o)});let o="",c=!1;document.querySelector("#room").addEventListener("click",e=>{e.target.hasAttribute("data-image")&&(c?(c=!1,o=""):(c=!0,o=e.target.id))}),document.querySelector("#room").addEventListener("mousemove",e=>{if(!0===c){let l=document.querySelector("#room").getBoundingClientRect(),c=e.clientX-document.querySelector("#all").querySelector(`#${o}`).clientWidth/2-l.left,u=e.clientY-document.querySelector("#all").querySelector(`#${o}`).clientHeight/2-l.top;c<0&&(c=0),c>document.querySelector("#room").clientWidth-document.querySelector("#all").querySelector(`#${o}`).scrollWidth&&(c=document.querySelector("#room").clientWidth-document.querySelector("#all").querySelector(`#${o}`).scrollWidth),u<0&&(u=0),u>document.querySelector("#room").clientHeight-document.querySelector("#all").querySelector(`#${o}`).clientHeight&&(u=document.querySelector("#room").clientHeight-document.querySelector("#all").querySelector(`#${o}`).clientHeight),document.querySelector("#all").querySelector(`#${o}`).style.left=`${c}px`,document.querySelector("#all").querySelector(`#${o}`).style.top=`${u}px`;let i=t("furniture"),n=i.find(e=>`img-${e.id}`===o);console.log(n),n.top=u,n.left=c,r("furniture",i)}}),document.querySelector("#remove-all").addEventListener("click",()=>{console.log("a"),r("furniture",[]),r("index",1),document.querySelector("#all").innerHTML=""});
//# sourceMappingURL=created-room-app.a928dbbd.js.map
